<!DOCTYPE html>
<html ng-app="myApp">

<head>
    <title>Pemble</title>
    <link rel="stylesheet" href="/node_modules/fullcalendar/dist/fullcalendar.min.css"/>
    <link rel="stylesheet" href="/node_modules/mdbootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/node_modules/mdbootstrap/css/mdb.min.css">
    <link rel="stylesheet" href="/node_modules/angular-toastr/dist/angular-toastr.min.css">
    <link rel="stylesheet" href="resources/angular-moment-picker.min.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
</head>

<body>

<div ng-view ng-cloak style="height: 100%;"></div>

<!--Node Modules-->
<script src="/node_modules/jquery/dist/jquery.min.js"></script>
<script src="/node_modules/angular/angular.min.js"></script>
<script src="/node_modules/angular-route/angular-route.min.js"></script>
<script src="/node_modules/angular-cookies/angular-cookies.min.js"></script>
<script src="/node_modules/moment/min/moment.min.js"></script>
<script src="/node_modules/fullcalendar/dist/fullcalendar.min.js"></script>
<script src="/node_modules/mdbootstrap/js/tether.js"></script>
<script src="/node_modules/mdbootstrap/js/bootstrap.min.js"></script>
<script src="/node_modules/mdbootstrap/js/mdb.min.js"></script>
<script src="/node_modules/angular-toastr/dist/angular-toastr.tpls.min.js"></script>
<script src="/node_modules/angularjs-scroll-glue/src/scrollglue.js"></script>

<!--Other-->
<script src="https://use.fontawesome.com/0d188512fc.js"></script>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDtcxmU7esy3552QUvURZiW8rvaWjbMUW8&libraries=places"></script>
<script src="resources/calendar.js"></script>
<!--Moment picker-->
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment-with-locales.js"></script>
<script src="resources/angular-moment-picker.min.js"></script>
<script async defer src="https://apis.google.com/js/api.js">
</script>
<script src="https://js.stripe.com/v3/"></script>
<!--&lt;!&ndash; Firebase &ndash;&gt;-->
<!--<script src="https://www.gstatic.com/firebasejs/3.6.6/firebase.js"></script>-->

<!--&lt;!&ndash; AngularFire &ndash;&gt;-->
<!--<script src="https://cdn.firebase.com/libs/angularfire/2.3.0/angularfire.min.js"></script>-->
<!--<script>-->
    <!--// Initialize Firebase-->
    <!--const config = {-->
        <!--apiKey: "AIzaSyBkt6sGzu2K-kqmRzUUhgc01o3NQHTaZ-s",-->
        <!--authDomain: "ambassadortracker.firebaseapp.com",-->
        <!--databaseURL: "https://ambassadortracker.firebaseio.com",-->
        <!--storageBucket: "ambassadortracker.appspot.com",-->
        <!--messagingSenderId: "1009962031783"-->
    <!--};-->
    <!--firebase.initializeApp(config);-->
<!--</script>-->
<!--&lt;!&ndash; Firechat &ndash;&gt;-->
<!--<link rel="stylesheet" href="https://cdn.firebase.com/libs/firechat/3.0.1/firechat.min.css" />-->
<!--<script src="https://cdn.firebase.com/libs/firechat/3.0.1/firechat.min.js"></script>-->

<!--JS Files-->
<script src="js/app.js"></script>
<script src="js/directive/googleplace.js"></script>
<script src="js/factory/job.js"></script>
<script src="js/factory/user.js"></script>
<script src="js/factory/chat.js"></script>
<script src="js/controller/login.js"></script>
<script src="js/controller/account.js"></script>
<script src="js/controller/profile.js"></script>
<script src="js/controller/create-job.js"></script>
<script src="js/controller/view-job.js"></script>
<script src="js/controller/home.js"></script>
<script src="js/controller/user.js"></script>
<script src="js/controller/wages.js"></script>
<script src="Unused/settings.js"></script>
<script src="js/controller/expenses.js"></script>
<script src="js/controller/chat.js"></script>
<script src="js/controller/messages.js"></script>
<script type="text/javascript">
    angular.module('myApp').run(function($rootScope, $cookies, $location) {

        $rootScope.logout = function () {
            console.log("Logging out");
            $cookies.remove('currentUser');
            $rootScope.currentUser = null;
            $location.path("/login");
        };

        let userId = $cookies.get('currentUser');

        if (userId == null) {
            $location.path("/login");
        }
//            updateData();
//        }

        $rootScope.$on('$routeChangeSuccess', function() {
            $("html, body").animate({ scrollTop: 0 }, 200);
        });

//        function updateData() {
//            chatService.findByParticipants(userId).then(function successCallback(response) {
//                $rootScope.messageCount = response.data.length;
//                $rootScope.latestMessageId = response.data[response.data.length - 1].id;
//            })
//        }

//        $rootScope.openLatestMessage = function () {
//            $location.path("/chat/" + $rootScope.latestMessageId);
//        }
    });
</script>
</body>

</html>